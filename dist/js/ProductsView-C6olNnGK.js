var $=(f,t,o)=>new Promise((r,m)=>{var g=p=>{try{y(o.next(p))}catch(d){m(d)}},i=p=>{try{y(o.throw(p))}catch(d){m(d)}},y=p=>p.done?r(p.value):Promise.resolve(p.value).then(g,i);y((o=o.apply(f,t)).next())});import{g as n,o as c,h as a,m as F,i as h,J as V,L as q,M as X,F as U,j as I,s as u,A as S,l as M,t as T,v as H,N as K,a as _,k as Q,u as W,G as Y,p as Z}from"./vendor-vue-Bh9miRvp.js";import"./index-CWq_U2wb.js";import{N as ee,_ as ae,F as te}from"./Navbar-D80SqxKG.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as se}from"./AxiosConfig-Dd5pkUAe.js";import{g as le}from"./categories-CjLhZxKX.js";const ie={name:"ProductFilters",props:{searchTerm:String,selectedCategory:{type:[String,Number],required:!1},minPrice:[String,Number],maxPrice:[String,Number],categories:{type:Array,required:!0}},emits:["update:searchTerm","update:selectedCategory","update:minPrice","update:maxPrice","apply-filters","clear-filters"],setup(f,{emit:t}){const o=u(f.searchTerm),r=u(f.selectedCategory),m=u(f.minPrice),g=u(f.maxPrice);S(o,d=>t("update:searchTerm",d)),S(r,d=>t("update:selectedCategory",d)),S(m,d=>t("update:minPrice",d)),S(g,d=>t("update:maxPrice",d));const i=()=>{o.value=""},y=()=>{t("apply-filters")},p=M(()=>o.value||r.value||m.value||g.value);return{localSearchTerm:o,localSelectedCategory:r,localMinPrice:m,localMaxPrice:g,clearSearch:i,applyFilters:y,hasActiveFilters:p}}},re={class:"filters-container"},oe={class:"filters-header"},ne={class:"filters-content"},ce={class:"filter-item search-filter"},ue={class:"search-wrapper"},de={class:"filter-item"},ve=["value"],me={class:"filter-item price-filter"},pe={class:"price-inputs"};function be(f,t,o,r,m,g){return c(),n("div",re,[a("div",oe,[t[8]||(t[8]=a("h2",null,[a("i",{class:"bi bi-funnel"}),h(" Filtrar productos")],-1)),r.hasActiveFilters?(c(),n("button",{key:0,class:"clear-all-btn",onClick:t[0]||(t[0]=i=>f.$emit("clear-filters")),title:"Limpiar todos los filtros"},[...t[7]||(t[7]=[a("i",{class:"bi bi-x-circle"},null,-1),h(" Limpiar todo ",-1)])])):F("",!0)]),a("div",ne,[a("div",ce,[t[10]||(t[10]=a("label",null,[a("i",{class:"bi bi-search"}),h(" Buscar")],-1)),a("div",ue,[V(a("input",{type:"text",class:"search-input",placeholder:"Nombre del producto...","onUpdate:modelValue":t[1]||(t[1]=i=>r.localSearchTerm=i)},null,512),[[q,r.localSearchTerm]]),r.localSearchTerm?(c(),n("button",{key:0,class:"clear-search-btn",onClick:t[2]||(t[2]=(...i)=>r.clearSearch&&r.clearSearch(...i)),title:"Limpiar búsqueda"},[...t[9]||(t[9]=[a("i",{class:"bi bi-x"},null,-1)])])):F("",!0)])]),a("div",de,[t[12]||(t[12]=a("label",{for:"category-filter"},[a("i",{class:"bi bi-tag"}),h(" Categoría")],-1)),V(a("select",{id:"category-filter",name:"category","onUpdate:modelValue":t[3]||(t[3]=i=>r.localSelectedCategory=i),class:"filter-select","aria-label":"Filtrar por categoría"},[t[11]||(t[11]=a("option",{value:""},"Todas las categorías",-1)),(c(!0),n(U,null,I(o.categories,i=>(c(),n("option",{key:i.value,value:i.value},T(i.icon)+" "+T(i.label),9,ve))),128))],512),[[X,r.localSelectedCategory]])]),a("div",me,[t[14]||(t[14]=a("label",null,[a("i",{class:"bi bi-cash-stack"}),h(" Rango de precio")],-1)),a("div",pe,[V(a("input",{type:"number",id:"price-min",name:"priceMin",class:"price-input",placeholder:"Mínimo",title:"Precio mínimo","aria-label":"Precio mínimo","onUpdate:modelValue":t[4]||(t[4]=i=>r.localMinPrice=i),min:"0"},null,512),[[q,r.localMinPrice,void 0,{number:!0}]]),t[13]||(t[13]=a("span",{class:"price-separator"},"—",-1)),V(a("input",{type:"number",id:"price-max",name:"priceMax",class:"price-input",placeholder:"Máximo",title:"Precio máximo","aria-label":"Precio máximo","onUpdate:modelValue":t[5]||(t[5]=i=>r.localMaxPrice=i),min:"0"},null,512),[[q,r.localMaxPrice,void 0,{number:!0}]])])]),a("button",{class:"apply-filters-btn",onClick:t[6]||(t[6]=(...i)=>r.applyFilters&&r.applyFilters(...i))},[...t[15]||(t[15]=[a("i",{class:"bi bi-search"},null,-1),h(" Aplicar filtros ",-1)])])])])}const ge=B(ie,[["render",be],["__scopeId","data-v-acdd396c"]]),fe={class:"products-view"},ye={class:"products-page"},Pe={class:"container"},he={key:0,class:"loading-container"},Ce={key:1,class:"products-section"},xe={class:"gallery-grid"},ke=["onClick"],Me={key:0,class:"product-badge"},Se={class:"product-img-wrap"},Te=["src","alt"],we={class:"product-info"},Ve={class:"product-category-tag"},_e={class:"product-name"},Fe={class:"product-footer"},Ne={class:"product-price"},Le=["onClick"],$e={key:0,class:"pagination","aria-label":"Navegación de productos"},qe=["disabled"],Ae=["onClick","aria-label","aria-current"],Ue=["disabled"],Ie={key:2,class:"no-products"},A=12,De={__name:"ProductsView",setup(f){const t=W(),o=K();function r(l){window.scrollTo({top:0,behavior:"smooth"}),t.push({name:"ProductoDetalle",params:{id:l}})}const m=u([]),g=u(!1),i=u([]),y=u(!1);function p(){return $(this,null,function*(){y.value=!0;try{const l=yield le();i.value=l.map(e=>({value:e.name.toLowerCase(),label:e.name,description:e.description||"",id:e.id}))}catch(l){i.value=[]}finally{y.value=!1}})}function d(){return $(this,null,function*(){g.value=!0;try{const l=yield se.doGet("/furniture/");m.value=l.data.map(e=>{let s="/assets/img/products/default.jpg";if(e.images&&Array.isArray(e.images)&&e.images.length>0){const v=e.images[0];s=typeof v=="string"?v:v.img_base64||v.url||s}else e.img_base64&&(s=e.img_base64);return{id:e.id,name:e.name,price:e.price,category:e.category_name||"",img:s,images:e.images||[]}})}catch(l){m.value=[]}finally{g.value=!1}})}H(()=>{d().then(()=>{}),p().then(()=>{});const l=u(o.params.categoria);D(l.value),o.query.buscar&&(C.value=o.query.buscar)}),S(()=>o.query.buscar,l=>{l&&(C.value=l,P.value="",b.value=1)}),S(()=>o.params.categoria,l=>{l&&D(l)});function D(l){l&&(P.value=l)}const P=u(""),C=u(""),x=u(""),k=u(""),b=u(1),N=M(()=>m.value.filter(e=>{const s=e.name.toLowerCase(),v=C.value.toLowerCase(),w=s.includes(v),E=!P.value||String(e.category).toLowerCase()===String(P.value).toLowerCase(),J=!x.value||e.price>=Number(x.value),O=!k.value||e.price<=Number(k.value);return w&&E&&J&&O})),R=M(()=>{const l=(b.value-1)*A,e=l+A;return N.value.slice(l,e)}),L=M(()=>Math.ceil(N.value.length/A)),z=M(()=>{const l=[];let s=Math.max(1,b.value-Math.floor(2.5)),v=Math.min(L.value,s+5-1);v-s<4&&(s=Math.max(1,v-5+1));for(let w=s;w<=v;w++)l.push(w);return l});M(()=>P.value||C.value||x.value||k.value);function j(){P.value="",C.value="",x.value="",k.value="",b.value=1}function G(){b.value=1}return(l,e)=>(c(),n("div",fe,[_(ee),_(ae),e[16]||(e[16]=Q('<section class="products-hero" data-v-0bff9cb4><div class="hero-overlay" data-v-0bff9cb4></div><div class="hero-content" data-v-0bff9cb4><h1 class="hero-title" data-v-0bff9cb4><i class="bi bi-shop" data-v-0bff9cb4></i> Catálogo de Productos </h1><p class="hero-subtitle" data-v-0bff9cb4>Descubre nuestros muebles de calidad excepcional</p></div></section>',1)),a("main",ye,[a("div",Pe,[_(ge,{searchTerm:C.value,selectedCategory:P.value,minPrice:x.value,maxPrice:k.value,categories:i.value,"onUpdate:searchTerm":e[0]||(e[0]=s=>C.value=s),"onUpdate:selectedCategory":e[1]||(e[1]=s=>P.value=s),"onUpdate:minPrice":e[2]||(e[2]=s=>x.value=s),"onUpdate:maxPrice":e[3]||(e[3]=s=>k.value=s),onApplyFilters:G,onClearFilters:j},null,8,["searchTerm","selectedCategory","minPrice","maxPrice","categories"]),g.value?(c(),n("div",he,[...e[6]||(e[6]=[a("div",{class:"spinner-container"},[a("div",{class:"spinner"}),a("p",null,"Cargando productos...")],-1)])])):N.value.length>0?(c(),n("div",Ce,[a("div",xe,[(c(!0),n(U,null,I(R.value,s=>(c(),n("article",{key:s.id,class:"product-card",onClick:v=>r(s.id)},[s.price<5e3?(c(),n("div",Me,[...e[7]||(e[7]=[a("i",{class:"bi bi-lightning-fill"},null,-1),h(" ¡Oferta! ",-1)])])):F("",!0),a("div",Se,[a("img",{src:s.img||"/assets/img/products/default.jpg",alt:s.name,class:"product-img",loading:"lazy"},null,8,Te),e[8]||(e[8]=a("div",{class:"img-overlay"},[a("i",{class:"bi bi-eye"}),a("span",null,"Ver detalles")],-1))]),a("div",we,[a("div",Ve,T(s.category),1),a("h3",_e,T(s.name),1),a("div",Fe,[a("span",Ne," $"+T(s.price.toLocaleString("es-MX")),1),a("button",{class:"product-btn",type:"button",onClick:Y(v=>r(s.id),["stop"])},[...e[9]||(e[9]=[a("i",{class:"bi bi-arrow-right-circle"},null,-1)])],8,Le)])])],8,ke))),128))]),L.value>1?(c(),n("nav",$e,[a("button",{class:"page-btn nav-btn",onClick:e[4]||(e[4]=s=>l.goToPage(b.value-1)),disabled:b.value===1,"aria-label":"Página anterior"},[...e[10]||(e[10]=[a("i",{class:"bi bi-chevron-left"},null,-1)])],8,qe),(c(!0),n(U,null,I(z.value,s=>(c(),n("button",{key:s,class:Z(["page-btn",{active:s===b.value}]),onClick:v=>l.goToPage(s),"aria-label":`Ir a página ${s}`,"aria-current":s===b.value?"page":null},T(s),11,Ae))),128)),a("button",{class:"page-btn nav-btn",onClick:e[5]||(e[5]=s=>l.goToPage(b.value+1)),disabled:b.value===L.value,"aria-label":"Página siguiente"},[...e[11]||(e[11]=[a("i",{class:"bi bi-chevron-right"},null,-1)])],8,Ue)])):F("",!0)])):(c(),n("div",Ie,[e[13]||(e[13]=a("div",{class:"no-products-icon"},[a("i",{class:"bi bi-inbox"})],-1)),e[14]||(e[14]=a("h3",null,"No hay productos que coincidan",-1)),e[15]||(e[15]=a("p",null,"Intenta ajustar los filtros de búsqueda o explora todas las categorías",-1)),a("button",{class:"btn-primary",onClick:j},[...e[12]||(e[12]=[a("i",{class:"bi bi-arrow-clockwise"},null,-1),h(" Ver todos los productos ",-1)])])]))])]),_(te)]))}},Oe=B(De,[["__scopeId","data-v-0bff9cb4"]]);export{Oe as default};
