var V=(F,$,_)=>new Promise((e,f)=>{var P=u=>{try{g(_.next(u))}catch(p){f(p)}},C=u=>{try{g(_.throw(u))}catch(p){f(p)}},g=u=>u.done?e(u.value):Promise.resolve(u.value).then(P,C);g((_=_.apply(F,$)).next())});import{s as r,N as K,l as Q,A as W,v as Y,g as l,a as k,h as a,m as h,J as y,w as S,r as ss,t as c,k as X,i as v,F as I,j as x,p as w,T as as,u as es,K as ts,o,G as ls}from"./vendor-vue-Bh9miRvp.js";import{a as os}from"./AxiosConfig-Dd5pkUAe.js";import{g as ds}from"./furniture-DrcXuzuN.js";import{N as is,_ as ns,F as rs}from"./Navbar-D80SqxKG.js";import{_ as cs}from"./_plugin-vue_export-helper-DlAUqK2U.js";const us={class:"product-detail"},vs={class:"detail-page"},fs={class:"container"},ps={class:"breadcrumb"},ms={class:"current"},gs={key:0,class:"loading-state"},bs={key:1,class:"error-state"},ks={key:2,class:"product-container"},_s={class:"gallery"},hs={class:"main-image-wrap"},ys={class:"image-badges"},Cs={key:0,class:"badge-stock"},ws={key:1,class:"badge-out"},$s=["src","alt"],Ss={key:0,class:"thumbs-wrap"},Is=["disabled"],xs=["src","onClick","alt"],Ps=["disabled"],Ds={class:"details"},Ms={class:"details-header"},As={class:"title"},Ns={class:"favorite-tooltip"},Ts={class:"price-section"},Vs={class:"price-wrapper"},Fs={class:"price"},Rs={class:"description-section"},zs={class:"description"},Bs={key:0,class:"features"},Ls={class:"actions-section"},js=["disabled"],Es={key:1,class:"info-box"},Xs={key:0,class:"related-products-section"},Os={class:"container"},Us={class:"section-header"},qs={key:0,class:"related-loading"},Gs={key:1,class:"related-products-grid"},Hs=["onClick"],Zs={class:"related-product-image"},Js=["src","alt"],Ks={class:"related-product-info"},Qs={class:"related-product-price"},Ws={key:0,class:"related-stock-badge"},Ys={key:1,class:"related-stock-badge out"},sa=["src","alt"],aa={key:0,class:"modal-nav"},ea={class:"modal-counter"},ta={__name:"ProductDetail",setup(F){const $=K(),_=es(),e=r({id:$.params.id,name:"",price:0,inStock:!0,description:"",images:[],features:[],category:""}),f=r(""),P=r(null),C=r(null),g=r(!0),u=r(""),p=r(!1);r(0),r(!1);const D=r(!1),M=r([]),A=r(!1),m=r(0),O=Q(()=>e.value.images.findIndex(t=>t===f.value));W(()=>e.value.images,t=>{t&&t.length>0&&(m.value=0,f.value=t[0])});function R(){return V(this,null,function*(){g.value=!0;try{const s=(yield os.doGet(`/furniture/${$.params.id}`)).data;let i=[];s.images&&Array.isArray(s.images)&&s.images.length>0?i=s.images.map(n=>typeof n=="string"?n:n.img_base64||n.url||"/assets/img/products/default.jpg").filter(Boolean):s.img_base64?i=[s.img_base64]:i=["/assets/img/products/default.jpg"],e.value={id:s.id,name:s.name,price:s.price,inStock:s.stock>0,description:s.description,images:i,category:s.category||"",features:[s.brand?`Marca: ${s.brand}`:null,s.color?`Color: ${s.color}`:null,s.material?`Material: ${s.material}`:null,s.dimensions?`Dimensiones: ${s.dimensions}`:null,s.category?`Categoría: ${s.category}`:null,`Stock disponible: ${s.stock} unidades`].filter(Boolean)},f.value=e.value.images[0],s.category&&U(s.category,s.id)}catch(t){u.value="No se pudo cargar el producto. Por favor, intenta nuevamente."}finally{g.value=!1}})}function U(t,s){return V(this,null,function*(){A.value=!0;try{const i=yield ds(0,8,t);M.value=i.filter(n=>n.id!==s).slice(0,4)}catch(i){console.error("Error al cargar productos relacionados:",i)}finally{A.value=!1}})}function q(t){window.scrollTo({top:0,behavior:"smooth"}),_.push({name:"ProductoDetalle",params:{id:t}}),setTimeout(()=>{R()},300)}Y(R);function N(t){m.value=t,f.value=e.value.images[t]}function z(){m.value<e.value.images.length-1&&N(m.value+1)}function B(){m.value>0&&N(m.value-1)}function L(t){t===1?z():t===-1&&B()}function G(t){const s=C.value;if(!s)return;const i=s.getBoundingClientRect(),n=(t.clientX-i.left)/i.width*100,d=(t.clientY-i.top)/i.height*100;s.style.transformOrigin=`${n}% ${d}%`,s.style.transform="scale(2)"}function T(){const t=C.value;t&&(t.style.transformOrigin="center center",t.style.transform="scale(1)")}function j(){T(),D.value=!0,document.body.style.overflow="hidden"}function E(){T(),D.value=!1,document.body.style.overflow=""}function H(){const t="5217341532692",s=`Hola, quiero apartar el producto: ${e.value.name} (ID: ${e.value.id}) - Precio: $${e.value.price.toLocaleString("es-MX")}`;window.open(`https://wa.me/${t}?text=${encodeURIComponent(s)}`,"_blank")}function Z(){window.open("tel:+5217341532692","_self")}function J(){p.value=!p.value}return(t,s)=>{const i=ss("router-link"),n=ts("scroll-animate");return o(),l("div",us,[k(is),k(ns),a("main",vs,[a("div",fs,[y((o(),l("nav",ps,[k(i,{to:"/"},{default:S(()=>[...s[4]||(s[4]=[v("Inicio",-1)])]),_:1}),s[6]||(s[6]=a("span",{class:"separator"},"/",-1)),k(i,{to:"/productos"},{default:S(()=>[...s[5]||(s[5]=[v("Productos",-1)])]),_:1}),s[7]||(s[7]=a("span",{class:"separator"},"/",-1)),a("span",ms,c(e.value.name),1)])),[[n,"fade-in-up"]]),g.value?(o(),l("div",gs,[...s[8]||(s[8]=[X('<div class="skeleton-loader" data-v-2d1ddebd><div class="skeleton-gallery" data-v-2d1ddebd><div class="skeleton-main-image" data-v-2d1ddebd></div><div class="skeleton-thumbs" data-v-2d1ddebd><div class="skeleton-thumb" data-v-2d1ddebd></div><div class="skeleton-thumb" data-v-2d1ddebd></div><div class="skeleton-thumb" data-v-2d1ddebd></div><div class="skeleton-thumb" data-v-2d1ddebd></div></div></div><div class="skeleton-details" data-v-2d1ddebd><div class="skeleton-title" data-v-2d1ddebd></div><div class="skeleton-price" data-v-2d1ddebd></div><div class="skeleton-badges" data-v-2d1ddebd><div class="skeleton-badge" data-v-2d1ddebd></div><div class="skeleton-badge" data-v-2d1ddebd></div><div class="skeleton-badge" data-v-2d1ddebd></div></div><div class="skeleton-text" data-v-2d1ddebd></div><div class="skeleton-text" data-v-2d1ddebd></div><div class="skeleton-button" data-v-2d1ddebd></div></div></div>',1)])])):u.value?y((o(),l("div",bs,[s[10]||(s[10]=a("i",{class:"fas fa-exclamation-circle"},null,-1)),a("h3",null,c(u.value),1),k(i,{to:"/productos",class:"back-btn"},{default:S(()=>[...s[9]||(s[9]=[a("i",{class:"fas fa-arrow-left"},null,-1),v(" Volver a productos ",-1)])]),_:1})])),[[n,"fade-in"]]):(o(),l("div",ks,[y((o(),l("section",_s,[a("div",hs,[a("div",ys,[e.value.inStock?(o(),l("span",Cs,[...s[11]||(s[11]=[a("i",{class:"fas fa-check-circle"},null,-1),v(" Disponible ",-1)])])):(o(),l("span",ws,[...s[12]||(s[12]=[a("i",{class:"fas fa-times-circle"},null,-1),v(" Agotado ",-1)])]))]),a("img",{src:f.value,alt:e.value.name,class:"main-image",onMousemove:G,onMouseleave:T,onClick:j,ref_key:"zoomImg",ref:C},null,40,$s),s[14]||(s[14]=a("div",{class:"zoom-hint"},[a("i",{class:"fas fa-search-plus"}),v(" Click para ampliar | Hover para zoom ")],-1)),a("button",{class:"fullscreen-btn",onClick:j,title:"Ver en pantalla completa"},[...s[13]||(s[13]=[a("i",{class:"fas fa-expand"},null,-1)])])]),e.value.images.length>1?(o(),l("div",Ss,[a("button",{class:"thumb-arrow left",onClick:s[0]||(s[0]=d=>L(-1)),disabled:m.value<=0},[...s[15]||(s[15]=[a("i",{class:"fas fa-chevron-left"},null,-1)])],8,Is),a("div",{class:"thumbnails",ref_key:"thumbs",ref:P,onScroll:s[1]||(s[1]=(...d)=>t.updateThumbScroll&&t.updateThumbScroll(...d))},[(o(!0),l(I,null,x(e.value.images,(d,b)=>(o(),l("img",{key:b,src:d,class:w({active:m.value===b}),onClick:la=>N(b),alt:`Vista ${b+1}`},null,10,xs))),128))],544),a("button",{class:"thumb-arrow right",onClick:s[2]||(s[2]=d=>L(1)),disabled:m.value>=e.value.images.length-1},[...s[16]||(s[16]=[a("i",{class:"fas fa-chevron-right"},null,-1)])],8,Ps)])):h("",!0)])),[[n,"fade-in-left"]]),y((o(),l("aside",Ds,[a("div",Ms,[a("h1",As,c(e.value.name),1),a("button",{class:w(["favorite-btn",{"is-favorite":p.value}]),onClick:J},[a("i",{class:w(p.value?"fas fa-heart":"far fa-heart")},null,2),a("span",Ns,c(p.value?"Quitar de favoritos":"Agregar a favoritos"),1)],2)]),a("div",Ts,[a("div",Vs,[s[17]||(s[17]=a("span",{class:"price-label"},"Precio:",-1)),a("p",Fs,"$"+c(e.value.price.toLocaleString("es-MX")),1)]),a("div",{class:w(["stock-indicator",{"in-stock":e.value.inStock,"out-of-stock":!e.value.inStock}])},[a("i",{class:w(e.value.inStock?"fas fa-check-circle":"fas fa-times-circle")},null,2),a("span",null,c(e.value.inStock?"En stock":"Agotado"),1)],2)]),s[24]||(s[24]=X('<div class="trust-badges" data-v-2d1ddebd><div class="badge-item" data-v-2d1ddebd><i class="fas fa-truck" data-v-2d1ddebd></i><div data-v-2d1ddebd><strong data-v-2d1ddebd>Entrega rápida</strong><span data-v-2d1ddebd>3-5 días hábiles</span></div></div><div class="badge-item" data-v-2d1ddebd><i class="fas fa-shield-alt" data-v-2d1ddebd></i><div data-v-2d1ddebd><strong data-v-2d1ddebd>Compra segura</strong><span data-v-2d1ddebd>Protección garantizada</span></div></div><div class="badge-item" data-v-2d1ddebd><i class="fas fa-hand-holding-usd" data-v-2d1ddebd></i><div data-v-2d1ddebd><strong data-v-2d1ddebd>Sin anticipo</strong><span data-v-2d1ddebd>Aparta sin pagar</span></div></div></div>',1)),a("div",Rs,[s[18]||(s[18]=a("h3",null,[a("i",{class:"fas fa-align-left"}),v(" Descripción")],-1)),a("p",zs,c(e.value.description||"Producto de excelente calidad."),1)]),e.value.features.length?(o(),l("div",Bs,[s[20]||(s[20]=a("h3",null,[a("i",{class:"fas fa-list-ul"}),v(" Características")],-1)),a("ul",null,[(o(!0),l(I,null,x(e.value.features,(d,b)=>(o(),l("li",{key:b},[s[19]||(s[19]=a("i",{class:"fas fa-check"},null,-1)),a("span",null,c(d),1)]))),128))])])):h("",!0),a("div",Ls,[a("button",{class:"cta-button primary whatsapp-btn",disabled:!e.value.inStock,onClick:H},[s[21]||(s[21]=a("i",{class:"fab fa-whatsapp"},null,-1)),a("span",null,c(e.value.inStock?"Apartar por WhatsApp":"No disponible"),1)],8,js),a("button",{class:"cta-button secondary",onClick:Z},[...s[22]||(s[22]=[a("i",{class:"fas fa-phone-alt"},null,-1),a("span",null,"Llamar ahora",-1)])])]),e.value.inStock?(o(),l("div",Es,[...s[23]||(s[23]=[a("i",{class:"fas fa-info-circle"},null,-1),a("div",null,[a("strong",null,"Aparta sin compromiso"),a("p",null,"Un asesor te contactará para confirmar tu pedido y resolver tus dudas.")],-1)])])):h("",!0)])),[[n,"fade-in-right"]])]))]),!g.value&&!u.value&&M.value.length>0?(o(),l("section",Xs,[a("div",Os,[y((o(),l("div",Us,[...s[25]||(s[25]=[a("h2",null,[a("i",{class:"fas fa-tag"}),v(" Productos Relacionados ")],-1),a("p",null,"Otros productos que podrían interesarte",-1)])])),[[n,"fade-in-up"]]),A.value?(o(),l("div",qs,[(o(),l(I,null,x(4,d=>a("div",{class:"skeleton-product-card",key:d},[...s[26]||(s[26]=[a("div",{class:"skeleton-product-image"},null,-1),a("div",{class:"skeleton-product-info"},[a("div",{class:"skeleton-product-title"}),a("div",{class:"skeleton-product-price"})],-1)])])),64))])):y((o(),l("div",Gs,[(o(!0),l(I,null,x(M.value,d=>(o(),l("div",{key:d.id,class:"related-product-card",onClick:b=>q(d.id)},[a("div",Zs,[a("img",{src:d.img_base64||"/assets/img/products/default.jpg",alt:d.name},null,8,Js),s[27]||(s[27]=a("div",{class:"related-product-overlay"},[a("i",{class:"fas fa-eye"}),a("span",null,"Ver Detalles")],-1))]),a("div",Ks,[a("h3",null,c(d.name),1),a("p",Qs,"$"+c(d.price.toLocaleString("es-MX")),1),d.stock>0?(o(),l("span",Ws,[...s[28]||(s[28]=[a("i",{class:"fas fa-check-circle"},null,-1),v(" Disponible ",-1)])])):(o(),l("span",Ys,[...s[29]||(s[29]=[a("i",{class:"fas fa-times-circle"},null,-1),v(" Agotado ",-1)])]))])],8,Hs))),128))])),[[n,"fade-in-up"]])])])):h("",!0)]),k(as,{name:"modal"},{default:S(()=>[D.value?(o(),l("div",{key:0,class:"image-modal-overlay",onClick:E},[a("div",{class:"image-modal-content",onClick:s[3]||(s[3]=ls(()=>{},["stop"]))},[a("button",{class:"modal-close",onClick:E},[...s[30]||(s[30]=[a("i",{class:"fas fa-times"},null,-1)])]),a("img",{src:f.value,alt:e.value.name,class:"modal-image"},null,8,sa),e.value.images.length>1?(o(),l("div",aa,[a("button",{onClick:B,class:"modal-nav-btn"},[...s[31]||(s[31]=[a("i",{class:"fas fa-chevron-left"},null,-1)])]),a("span",ea,c(O.value+1)+" / "+c(e.value.images.length),1),a("button",{onClick:z,class:"modal-nav-btn"},[...s[32]||(s[32]=[a("i",{class:"fas fa-chevron-right"},null,-1)])])])):h("",!0)])])):h("",!0)]),_:1}),k(rs)])}}},ua=cs(ta,[["__scopeId","data-v-2d1ddebd"]]);export{ua as default};
