import{_ as j,r as c,a as A,o as F,c as a,b as e,d as y,F as k,e as C,t as r,w as s,v as d,f as q,g as I,h as b,u as B,i as n}from"./index-XcAAWNLB.js";const N={class:"admin-dashboard"},P={key:0},$={key:1},L={key:0,border:"1",style:{width:"100%","margin-bottom":"2rem"}},R={"data-label":"Nombre"},O={"data-label":"Precio"},G={"data-label":"Categoría"},K={"data-label":"Stock"},T={"data-label":"Marca"},z={"data-label":"Color"},H={"data-label":"Material"},J={"data-label":"Dimensiones"},Q={"data-label":"Imagen"},W=["src"],X={"data-label":"Acciones"},Y=["onClick"],Z=["onClick"],ee={key:1},oe={key:2,class:"modal-form"},le={class:"form-instructions"},te={class:"form-grid"},ae=["value"],re=["src"],ne={class:"form-buttons"},ie={__name:"AdminDashboard",setup(se){const E=B(),p=c([]),f=c(!1),h=c(""),u=c(!1),m=c(!1),t=A({id:null,name:"",description:"",price:0,category:"",img_base64:"",stock:0,brand:"",color:"",material:"",dimensions:""}),_=[{label:"Sala",value:"sala"},{label:"Oficina",value:"oficina"},{label:"Camas y colchones",value:"camas-y-colchones"},{label:"Comedor",value:"comedor"},{label:"Cocinas",value:"cocinas"},{label:"Electrodomésticos pequeños",value:"electrodomesticos-pequenos"},{label:"Bicicletas",value:"bicicletas"},{label:"Refrigeradores",value:"refrigeradores"}];function w(){localStorage.removeItem("token"),E.push("/login")}async function g(){f.value=!0;try{const i=await b.doGet("/furniture/");p.value=i.data}catch{h.value="Error al cargar muebles"}finally{f.value=!1}}function x(){m.value=!1,Object.assign(t,{id:null,name:"",description:"",price:0,category:"",img_base64:"",stock:0,brand:"",color:"",material:"",dimensions:""}),u.value=!0}function U(i){m.value=!0,Object.assign(t,i),u.value=!0}function V(){return t.name.trim()?t.price<=0?(alert("El precio debe ser mayor a 0."),!1):t.category.trim()?t.stock<0?(alert("El stock no puede ser negativo."),!1):!0:(alert("La categoría es obligatoria."),!1):(alert("El nombre del mueble es obligatorio."),!1)}async function D(){if(V())try{m.value?await b.doPut(`/furniture/${t.id}`,t):await b.doPost("/furniture/",t),u.value=!1,g()}catch{}}async function M(i){if(confirm("¿Seguro que deseas eliminar este mueble?"))try{await b.doDelete(`/furniture/${i}`),g()}catch{}}function S(i){const o=i.target.files[0];if(!o)return;const l=new FileReader;l.onload=v=>{t.img_base64=v.target.result},l.readAsDataURL(o)}return F(g),(i,o)=>(n(),a("div",N,[o[23]||(o[23]=e("h1",null,"Bienvenido al Dashboard de Admin",-1)),o[24]||(o[24]=e("p",null,"Aquí puedes gestionar productos, usuarios, pedidos, etc.",-1)),e("button",{onClick:w},"Cerrar sesión"),f.value?(n(),a("div",P,"Cargando muebles...")):(n(),a("div",$,[e("button",{onClick:x,style:{"margin-bottom":"1rem"}},"Agregar mueble"),p.value.length?(n(),a("table",L,[o[10]||(o[10]=e("thead",null,[e("tr",null,[e("th",null,"Nombre"),e("th",null,"Precio"),e("th",null,"Categoría"),e("th",null,"Stock"),e("th",null,"Marca"),e("th",null,"Color"),e("th",null,"Material"),e("th",null,"Dimensiones"),e("th",null,"Imagen"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(n(!0),a(k,null,C(p.value,l=>(n(),a("tr",{key:l.id},[e("td",R,r(l.name),1),e("td",O,"$"+r(l.price),1),e("td",G,r(l.category),1),e("td",K,r(l.stock),1),e("td",T,r(l.brand),1),e("td",z,r(l.color),1),e("td",H,r(l.material),1),e("td",J,r(l.dimensions),1),e("td",Q,[l.img_base64?(n(),a("img",{key:0,src:l.img_base64,alt:"img",style:{"max-width":"60px","max-height":"60px"}},null,8,W)):y("",!0)]),e("td",X,[e("button",{onClick:v=>U(l)},"Editar",8,Y),e("button",{onClick:v=>M(l.id),style:{"margin-left":"0.5rem"}},"Eliminar",8,Z)])]))),128))])])):(n(),a("div",ee,"No hay muebles registrados."))])),u.value?(n(),a("div",oe,[e("form",{onSubmit:I(D,["prevent"])},[e("h2",null,r(m.value?"Editar mueble":"Agregar nuevo mueble"),1),e("p",le,"Por favor, completa los campos a continuación para "+r(m.value?"editar":"agregar")+" un mueble.",1),e("div",te,[e("div",null,[o[12]||(o[12]=e("label",{for:"name"},"Nombre del mueble",-1)),s(e("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=l=>t.name=l),placeholder:"Ejemplo: Silla de madera",required:""},null,512),[[d,t.name]]),o[13]||(o[13]=e("label",{for:"price"},"Precio",-1)),s(e("input",{id:"price","onUpdate:modelValue":o[1]||(o[1]=l=>t.price=l),type:"number",placeholder:"Ejemplo: 1500",required:""},null,512),[[d,t.price,void 0,{number:!0}]]),o[14]||(o[14]=e("label",{for:"category"},"Categoría",-1)),s(e("select",{id:"category","onUpdate:modelValue":o[2]||(o[2]=l=>t.category=l),required:""},[o[11]||(o[11]=e("option",{value:"",disabled:""},"Selecciona una categoría",-1)),(n(),a(k,null,C(_,l=>e("option",{key:l.value,value:l.value},r(l.label),9,ae)),64))],512),[[q,t.category]]),o[15]||(o[15]=e("label",{for:"stock"},"Stock disponible",-1)),s(e("input",{id:"stock","onUpdate:modelValue":o[3]||(o[3]=l=>t.stock=l),type:"number",placeholder:"Ejemplo: 10"},null,512),[[d,t.stock,void 0,{number:!0}]]),o[16]||(o[16]=e("label",{for:"brand"},"Marca",-1)),s(e("input",{id:"brand","onUpdate:modelValue":o[4]||(o[4]=l=>t.brand=l),placeholder:"Ejemplo: IKEA"},null,512),[[d,t.brand]])]),e("div",null,[o[17]||(o[17]=e("label",{for:"color"},"Color",-1)),s(e("input",{id:"color","onUpdate:modelValue":o[5]||(o[5]=l=>t.color=l),placeholder:"Ejemplo: Blanco"},null,512),[[d,t.color]]),o[18]||(o[18]=e("label",{for:"material"},"Material",-1)),s(e("input",{id:"material","onUpdate:modelValue":o[6]||(o[6]=l=>t.material=l),placeholder:"Ejemplo: Madera"},null,512),[[d,t.material]]),o[19]||(o[19]=e("label",{for:"dimensions"},"Dimensiones",-1)),s(e("input",{id:"dimensions","onUpdate:modelValue":o[7]||(o[7]=l=>t.dimensions=l),placeholder:"Ejemplo: 120x60x80 cm"},null,512),[[d,t.dimensions]]),o[20]||(o[20]=e("label",{for:"description"},"Descripción",-1)),s(e("textarea",{id:"description","onUpdate:modelValue":o[8]||(o[8]=l=>t.description=l),placeholder:"Ejemplo: Una silla cómoda y resistente, ideal para oficinas."},null,512),[[d,t.description]]),o[21]||(o[21]=e("label",{for:"image"},"Imagen",-1)),e("input",{id:"image",type:"file",accept:"image/*",onChange:S},null,32),t.img_base64?(n(),a("img",{key:0,src:t.img_base64,alt:"Vista previa de la imagen",class:"image-preview"},null,8,re)):y("",!0)])]),e("div",ne,[o[22]||(o[22]=e("button",{type:"submit"},"Guardar",-1)),e("button",{type:"button",onClick:o[9]||(o[9]=l=>u.value=!1)},"Cancelar")])],32)])):y("",!0)]))}},ue=j(ie,[["__scopeId","data-v-3ed0995a"]]);export{ue as default};
