import{_ as $,r as p,a as q,o as L,c as n,b as e,d as P,e as t,t as i,F as C,f as h,w as B,T as z,g as r,u as W,h as d,n as w,i as j,j as M,k as x,l as u,v as c,m as R}from"./index-B6ZT0DqV.js";const G={class:"admin-dashboard"},O={class:"dashboard-content"},K={key:0,class:"loading-container"},X={key:1,class:"content-wrapper"},H={class:"actions-bar"},J={class:"stats-summary"},Q={class:"stat-item"},Y={key:0,class:"table-container"},Z={class:"furniture-table"},ee={"data-label":"Imagen",class:"img-cell"},le={class:"img-wrapper"},se=["src"],oe={key:1,class:"no-image"},ae={"data-label":"Nombre",class:"name-cell"},te={"data-label":"Precio",class:"price-cell"},ie={"data-label":"Categoría"},ne={class:"category-badge"},re={"data-label":"Stock"},de={"data-label":"Marca"},ue={"data-label":"Color"},ce={"data-label":"Material"},be={"data-label":"Dimensiones"},me={"data-label":"Acciones",class:"actions-cell"},pe=["onClick"],ge=["onClick"],fe={key:1,class:"empty-state"},ve={class:"modal-form"},ye={class:"form-header"},_e={class:"form-body"},ke={class:"form-grid"},Ce={class:"form-column"},he={class:"form-group"},we={class:"form-group"},Me={class:"form-group"},xe=["value"],Se={class:"form-row"},Ve={class:"form-group"},Ee={class:"form-group"},Te={class:"form-column"},De={class:"form-row"},Fe={class:"form-group"},Ue={class:"form-group"},Ie={class:"form-group"},Ae={class:"form-group"},Ne={class:"form-group"},$e={class:"image-upload-wrapper"},qe={for:"image",class:"file-label"},Le=["src"],Pe={class:"form-footer"},Be={type:"submit",class:"btn-primary"},ze={__name:"AdminDashboard",setup(We){const S=W(),g=p([]),f=p(!1),V=p(""),b=p(!1),m=p(!1),o=q({id:null,name:"",description:"",price:0,category_id:null,img_base64:"",stock:0,brand:"",color:"",material:"",dimensions:""}),_=[{label:"Sala",value:1},{label:"Comedor",value:2},{label:"Cocinas",value:3},{label:"Oficina",value:4},{label:"Camas y colchones",value:5},{label:"Electrodomésticos pequeños",value:6},{label:"Bicicletas",value:7},{label:"Refrigeradores",value:8}];function E(){localStorage.removeItem("token"),S.push("/login")}async function v(){f.value=!0;try{const a=await r.doGet("/furniture/");g.value=a.data}catch{V.value="Error al cargar muebles"}finally{f.value=!1}}function k(){m.value=!1,Object.assign(o,{id:null,name:"",description:"",price:0,category_id:null,img_base64:"",stock:0,brand:"",color:"",material:"",dimensions:""}),b.value=!0}function T(a){m.value=!0,Object.assign(o,{...a,category_id:a.category_id||a.category}),b.value=!0}function D(){return o.name.trim()?o.price<=0?(r.ToastWarning("Validación","El precio debe ser mayor a 0."),!1):o.category_id?o.stock<0?(r.ToastWarning("Validación","El stock no puede ser negativo."),!1):!0:(r.ToastWarning("Validación","La categoría es obligatoria."),!1):(r.ToastWarning("Validación","El nombre del mueble es obligatorio."),!1)}async function F(){if(!D())return;const a={name:o.name,description:o.description||"",price:parseFloat(o.price),category_id:parseInt(o.category_id),img_base64:o.img_base64||"",stock:parseInt(o.stock)||0,brand:o.brand||"",color:o.color||"",material:o.material||"",dimensions:o.dimensions||""};try{m.value?(await r.doPut(`/furniture/${o.id}/`,a),r.ToastSuccess("¡Éxito!","Mueble actualizado correctamente.")):(await r.doPost("/furniture/",a),r.ToastSuccess("¡Éxito!","Mueble creado correctamente.")),b.value=!1,v()}catch(l){console.error("Error al guardar:",l)}}async function U(a){if(confirm("¿Seguro que deseas eliminar este mueble?"))try{await r.doDelete(`/furniture/${a}/`),r.ToastSuccess("¡Éxito!","Mueble eliminado correctamente."),v()}catch(l){console.error("Error al eliminar:",l)}}function I(a){const l=a.target.files[0];if(!l)return;if(l.size>5*1024*1024){r.ToastWarning("Imagen muy grande","La imagen no debe superar los 5MB.");return}const s=new FileReader;s.onload=y=>{o.img_base64=y.target.result},s.readAsDataURL(l)}L(v);function A(a){const l=_.find(s=>s.value===a);return l?l.label:a}function N(a){return a===0?"out-of-stock":a<5?"low-stock":"in-stock"}return(a,l)=>(d(),n("div",G,[e("div",{class:"dashboard-header"},[e("div",{class:"header-content"},[l[13]||(l[13]=e("div",{class:"header-title-section"},[e("i",{class:"bi bi-speedometer2"}),e("div",null,[e("h1",null,"Panel de Administración"),e("p",null,"Gestiona tu inventario de muebles")])],-1)),e("button",{onClick:E,class:"logout-btn"},l[12]||(l[12]=[e("i",{class:"bi bi-box-arrow-right"},null,-1),t(" Cerrar sesión ")]))])]),e("div",O,[f.value?(d(),n("div",K,l[14]||(l[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"Cargando muebles...",-1)]))):(d(),n("div",X,[e("div",H,[e("button",{onClick:k,class:"btn-primary"},l[15]||(l[15]=[e("i",{class:"bi bi-plus-circle"},null,-1),t(" Agregar Mueble ")])),e("div",J,[e("div",Q,[l[16]||(l[16]=e("i",{class:"bi bi-box-seam"},null,-1)),e("span",null,i(g.value.length)+" productos",1)])])]),g.value.length?(d(),n("div",Y,[e("table",Z,[l[20]||(l[20]=e("thead",null,[e("tr",null,[e("th",null,"Imagen"),e("th",null,"Nombre"),e("th",null,"Precio"),e("th",null,"Categoría"),e("th",null,"Stock"),e("th",null,"Marca"),e("th",null,"Color"),e("th",null,"Material"),e("th",null,"Dimensiones"),e("th",null,"Acciones")])],-1)),e("tbody",null,[(d(!0),n(C,null,h(g.value,s=>(d(),n("tr",{key:s.id,class:"table-row"},[e("td",ee,[e("div",le,[s.img_base64?(d(),n("img",{key:0,src:s.img_base64,alt:"img"},null,8,se)):(d(),n("div",oe,l[17]||(l[17]=[e("i",{class:"bi bi-image"},null,-1)])))])]),e("td",ae,i(s.name),1),e("td",te,"$"+i(s.price.toLocaleString("es-MX")),1),e("td",ie,[e("span",ne,i(A(s.category)),1)]),e("td",re,[e("span",{class:w(["stock-badge",N(s.stock)])},i(s.stock),3)]),e("td",de,i(s.brand||"-"),1),e("td",ue,[e("span",{class:"color-dot",style:j({background:s.color||"#ccc"})},null,4),t(" "+i(s.color||"-"),1)]),e("td",ce,i(s.material||"-"),1),e("td",be,i(s.dimensions||"-"),1),e("td",me,[e("button",{onClick:y=>T(s),class:"btn-icon btn-edit",title:"Editar"},l[18]||(l[18]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,pe),e("button",{onClick:y=>U(s.id),class:"btn-icon btn-delete",title:"Eliminar"},l[19]||(l[19]=[e("i",{class:"bi bi-trash"},null,-1)]),8,ge)])]))),128))])])])):(d(),n("div",fe,[l[22]||(l[22]=e("i",{class:"bi bi-inbox"},null,-1)),l[23]||(l[23]=e("h3",null,"No hay muebles registrados",-1)),l[24]||(l[24]=e("p",null,"Comienza agregando tu primer producto",-1)),e("button",{onClick:k,class:"btn-primary"},l[21]||(l[21]=[e("i",{class:"bi bi-plus-circle"},null,-1),t(" Agregar Mueble ")]))]))]))]),P(z,{name:"modal"},{default:B(()=>[b.value?(d(),n("div",{key:0,class:"modal-overlay",onClick:l[11]||(l[11]=x(s=>b.value=!1,["self"]))},[e("div",ve,[e("form",{onSubmit:x(F,["prevent"])},[e("div",ye,[e("h2",null,[e("i",{class:w(m.value?"bi bi-pencil-square":"bi bi-plus-square")},null,2),t(" "+i(m.value?"Editar Mueble":"Nuevo Mueble"),1)]),e("button",{type:"button",onClick:l[0]||(l[0]=s=>b.value=!1),class:"close-btn"},l[25]||(l[25]=[e("i",{class:"bi bi-x-lg"},null,-1)]))]),e("div",_e,[e("div",ke,[e("div",Ce,[e("div",he,[l[26]||(l[26]=e("label",{for:"name"},[e("i",{class:"bi bi-card-heading"}),t(" Nombre del mueble * ")],-1)),u(e("input",{id:"name","onUpdate:modelValue":l[1]||(l[1]=s=>o.name=s),placeholder:"Ej: Silla ergonómica",required:""},null,512),[[c,o.name]])]),e("div",we,[l[27]||(l[27]=e("label",{for:"price"},[e("i",{class:"bi bi-currency-dollar"}),t(" Precio * ")],-1)),u(e("input",{id:"price","onUpdate:modelValue":l[2]||(l[2]=s=>o.price=s),type:"number",placeholder:"1500",required:""},null,512),[[c,o.price,void 0,{number:!0}]])]),e("div",Me,[l[29]||(l[29]=e("label",{for:"category"},[e("i",{class:"bi bi-tags"}),t(" Categoría * ")],-1)),u(e("select",{id:"category","onUpdate:modelValue":l[3]||(l[3]=s=>o.category_id=s),required:""},[l[28]||(l[28]=e("option",{value:null,disabled:""},"Selecciona una categoría",-1)),(d(),n(C,null,h(_,s=>e("option",{key:s.value,value:s.value},i(s.label),9,xe)),64))],512),[[R,o.category_id]])]),e("div",Se,[e("div",Ve,[l[30]||(l[30]=e("label",{for:"stock"},[e("i",{class:"bi bi-box"}),t(" Stock ")],-1)),u(e("input",{id:"stock","onUpdate:modelValue":l[4]||(l[4]=s=>o.stock=s),type:"number",placeholder:"10"},null,512),[[c,o.stock,void 0,{number:!0}]])]),e("div",Ee,[l[31]||(l[31]=e("label",{for:"brand"},[e("i",{class:"bi bi-award"}),t(" Marca ")],-1)),u(e("input",{id:"brand","onUpdate:modelValue":l[5]||(l[5]=s=>o.brand=s),placeholder:"IKEA"},null,512),[[c,o.brand]])])])]),e("div",Te,[e("div",De,[e("div",Fe,[l[32]||(l[32]=e("label",{for:"color"},[e("i",{class:"bi bi-palette"}),t(" Color ")],-1)),u(e("input",{id:"color","onUpdate:modelValue":l[6]||(l[6]=s=>o.color=s),placeholder:"Blanco"},null,512),[[c,o.color]])]),e("div",Ue,[l[33]||(l[33]=e("label",{for:"material"},[e("i",{class:"bi bi-tree"}),t(" Material ")],-1)),u(e("input",{id:"material","onUpdate:modelValue":l[7]||(l[7]=s=>o.material=s),placeholder:"Madera"},null,512),[[c,o.material]])])]),e("div",Ie,[l[34]||(l[34]=e("label",{for:"dimensions"},[e("i",{class:"bi bi-rulers"}),t(" Dimensiones ")],-1)),u(e("input",{id:"dimensions","onUpdate:modelValue":l[8]||(l[8]=s=>o.dimensions=s),placeholder:"120x60x80 cm"},null,512),[[c,o.dimensions]])]),e("div",Ae,[l[35]||(l[35]=e("label",{for:"description"},[e("i",{class:"bi bi-text-paragraph"}),t(" Descripción ")],-1)),u(e("textarea",{id:"description","onUpdate:modelValue":l[9]||(l[9]=s=>o.description=s),placeholder:"Describe las características del mueble...",rows:"3"},null,512),[[c,o.description]])]),e("div",Ne,[l[37]||(l[37]=e("label",{for:"image"},[e("i",{class:"bi bi-image"}),t(" Imagen del producto ")],-1)),e("div",$e,[e("input",{id:"image",type:"file",accept:"image/*",onChange:I,class:"file-input"},null,32),e("label",qe,[l[36]||(l[36]=e("i",{class:"bi bi-cloud-upload"},null,-1)),e("span",null,i(o.img_base64?"Cambiar imagen":"Subir imagen"),1)]),o.img_base64?(d(),n("img",{key:0,src:o.img_base64,alt:"Preview",class:"image-preview"},null,8,Le)):M("",!0)])])])])]),e("div",Pe,[e("button",{type:"button",onClick:l[10]||(l[10]=s=>b.value=!1),class:"btn-secondary"},l[38]||(l[38]=[e("i",{class:"bi bi-x-circle"},null,-1),t(" Cancelar ")])),e("button",Be,[l[39]||(l[39]=e("i",{class:"bi bi-check-circle"},null,-1)),t(" "+i(m.value?"Guardar Cambios":"Crear Mueble"),1)])])],32)])])):M("",!0)]),_:1})]))}},Re=$(ze,[["__scopeId","data-v-dd11e641"]]);export{Re as default};
